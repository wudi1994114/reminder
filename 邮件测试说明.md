# 腾讯云邮件发送器测试说明

## 🚀 快速测试

### 1. 使用独立测试类（推荐）

我已经创建了一个简单的测试类 `EmailSenderTest.java`，你可以直接运行测试：

#### 步骤：
1. **修改配置参数**
   打开 `EmailSenderTest.java` 文件，修改以下常量：
   ```java
   private static final String USERNAME = "your-username@your-domain.com";  // 你的SMTP用户名
   private static final String PASSWORD = "your-password";                   // 你的SMTP密码  
   private static final String FROM_EMAIL = "your-from@your-domain.com";    // 发件人邮箱
   private static final String TO_EMAIL = "test@example.com";               // 收件人邮箱（测试用）
   ```

2. **编译并运行**
   ```bash
   # 进入项目根目录
   cd /Users/wudi/Desktop/reminder
   
   # 编译（需要JavaMail依赖）
   javac -cp "reminder-backend/reminder-job/target/classes:$HOME/.m2/repository/javax/mail/mail/1.4.7/mail-1.4.7.jar" EmailSenderTest.java
   
   # 运行测试
   java -cp ".:reminder-backend/reminder-job/target/classes:$HOME/.m2/repository/javax/mail/mail/1.4.7/mail-1.4.7.jar" EmailSenderTest
   ```

### 2. 使用TencentCloudEmailSender的main方法

你也可以直接运行 `TencentCloudEmailSender` 类的main方法：

```bash
cd reminder-backend/reminder-job
mvn exec:java -Dexec.mainClass="com.task.reminder.sender.TencentCloudEmailSender"
```

## 📋 腾讯云SES配置要求

### 1. 开通腾讯云SES服务
- 登录腾讯云控制台
- 开通Simple Email Service (SES)
- 验证发件人域名或邮箱

### 2. 获取SMTP凭据
- 在SES控制台创建SMTP用户
- 获取SMTP用户名和密码
- 记录SMTP服务器地址：`smtp.qcloudmail.com`

### 3. 验证发件人
- 验证发件人邮箱地址
- 或验证整个域名

## 🔧 配置参数说明

| 参数 | 说明 | 示例 |
|------|------|------|
| USERNAME | SMTP用户名 | `ses-smtp-user.20231201-123456@your-domain.com` |
| PASSWORD | SMTP密码 | `ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnop` |
| FROM_EMAIL | 发件人邮箱 | `noreply@your-domain.com` |
| TO_EMAIL | 测试收件人 | `your-test@gmail.com` |

## ✅ 测试结果

### 成功输出示例：
```
=== 腾讯云邮件发送测试 ===
📧 正在发送邮件...
发件人: noreply@your-domain.com
收件人: test@example.com
✅ 邮件发送成功！
请检查收件箱: test@example.com
```

### 失败排查：
1. **认证失败**：检查用户名和密码
2. **发件人未验证**：在腾讯云SES中验证发件人邮箱
3. **网络问题**：检查网络连接和防火墙
4. **服务未开通**：确认腾讯云SES服务已开通

## 🔄 在Spring Boot中使用

### 1. 配置文件
在 `application.properties` 中添加：
```properties
# 邮件提供商选择
email.provider=tencent

# 腾讯云邮件配置
tencent.email.username=your-smtp-username@your-domain.com
tencent.email.password=your-smtp-password
tencent.email.from=your-from-email@your-domain.com
tencent.email.from.name=提醒助手
tencent.email.ssl.enabled=true
```

### 2. 使用EmailSenderFactory
```java
@Autowired
private EmailSenderFactory emailSenderFactory;

// 发送邮件
boolean success = emailSenderFactory.sendEmail(
    "recipient@example.com", 
    "测试主题", 
    "测试内容"
);
```

## 📞 技术支持

如果遇到问题，请检查：
1. 腾讯云SES服务状态
2. 发件人邮箱验证状态  
3. SMTP凭据是否正确
4. 网络连接是否正常 